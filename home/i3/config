# i3 config file (v4)
#
# 请查看 https://i3wm.org/docs/userguide.html 获取完整参考

# 设置 mod 键 (Mod1=Alt, Mod4=Super/Win键)
set $mod Mod4

# 设置字体
font pango:monospace 10

# 使用 Mouse+$mod 来拖动浮动窗口
floating_modifier $mod

# 启动终端
bindsym $mod+Return exec i3-sensible-terminal

# 关闭当前窗口
bindsym $mod+Shift+q kill

# 启动 dmenu (程序启动器)
bindsym $mod+d exec --no-startup-id dmenu_run

# 更改焦点
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# 也可使用方向键
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# 移动焦点窗口
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# 也可使用方向键
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# 水平分割窗口
bindsym $mod+h split h

# 垂直分割窗口
bindsym $mod+v split v

# 全屏模式
bindsym $mod+f fullscreen toggle

# 更改容器布局（堆叠、选项卡式、切换拆分）
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# 切换平铺/浮动
bindsym $mod+Shift+space floating toggle

# 更改焦点：平铺窗口/浮动窗口
bindsym $mod+space focus mode_toggle

# 聚焦父容器
bindsym $mod+a focus parent

# 聚焦子容器
#bindsym $mod+d focus child

# 定义工作区名称
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# 切换到工作区
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# 移动窗口到工作区
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# 重新加载配置文件
bindsym $mod+Shift+c reload
# 重新启动 i3（保留布局/会话，可用于升级 i3）
bindsym $mod+Shift+r restart
# 退出 i3（退出 X 会话）
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

# 调整窗口大小模式
mode "resize" {
        # 这些绑定在调整窗口大小时触发

        # 按住左右键调整窗口宽度
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # 同样适用于方向键
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # 返回正常模式
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# 启动 i3 状态栏
bar {
        status_command i3status
}

# 开机启动程序
# 执行 xrandr 配置屏幕分辨率
# exec --no-startup-id xrandr --output VGA-1 --mode 1920x1080

# 设置壁纸
exec --no-startup-id feh --bg-fill ~/Pictures/wallpaper.jpg

# 启动组合键管理器
exec --no-startup-id xcompmgr

# 启动网络管理托盘图标
exec --no-startup-id nm-applet

# 启动音量控制托盘图标
exec --no-startup-id volumeicon

# 启动剪贴板管理器
exec --no-startup-id clipit

# 锁屏快捷键
bindsym $mod+Shift+x exec i3lock -c 000000

# 截屏快捷键
bindsym Print exec --no-startup-id scrot '%Y-%m-%d_%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/'

# 音量控制键
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle

# 亮度控制键
bindsym XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 10
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 10
